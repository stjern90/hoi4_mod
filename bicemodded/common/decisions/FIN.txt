FIN_sovwar = {

	FIN_sales1 = {
	    allowed = {
			always = yes
			#added through on_action
		}
			
		visible = {
			original_tag = FIN
			has_completed_focus = FIN_salestax
			or = {
				has_idea = FIN_loans
				has_idea = FIN_loans2
				has_idea = FIN_loans3
				has_idea = FIN_loans4
				has_idea = FIN_loans5
			}
		}

		available = {
			original_tag = FIN
			has_completed_focus = FIN_salestax
			has_global_flag = FIN_winterwar
			
		}
		
		cost = 100

		ai_will_do = {
			factor = 200
		}
		
		fire_only_once = yes

		complete_effect = {
			FIN_loan_decrease = yes
		}
	}

	FIN_grain = {
	    allowed = {
			always = yes
			#added through on_action
		}
			
		visible = {
			original_tag = FIN
			has_completed_focus = FIN_statecontrol
		}

		available = {
			original_tag = FIN
			has_completed_focus = FIN_statecontrol
			NOT = { has_global_flag = winterwar }
			or = {
				has_idea = FIN_russia
				has_idea = FIN_russia2
			}
		}
		
		cost = 30
		
		days_re_enable = 10

		ai_will_do = {
			factor = 200
		}
		
		fire_only_once = yes

		complete_effect = {
			FIN_russia_decrease = yes
		}
	}
	
	FIN_grain2 = {
	    allowed = {
			always = yes
			#added through on_action
		}
			
		visible = {
			original_tag = FIN
			has_completed_focus = FIN_statecontrol
		}

		available = {
			original_tag = FIN
			has_completed_focus = FIN_statecontrol
			NOT = { has_global_flag = winterwar }
			or = {
				has_idea = FIN_russia2
				has_idea = FIN_russia3
			}
		}
		
		cost = 30
		
		days_re_enable = 10

		ai_will_do = {
			factor = 0
		}
		
		fire_only_once = yes

		complete_effect = {
			FIN_russia_increase = yes
		}
	}

	FIN_winterwar3 = {
	    allowed = {
			always = yes
			#added through on_action
		}
			
		visible = {
			original_tag = FIN
			has_defensive_war_with = SOV
		}

		available = {
			original_tag = FIN
			has_defensive_war_with = SOV
		}

		ai_will_do = {
			factor = 200
		}
		
		fire_only_once = yes

		complete_effect = {
			if = {
				limit = { is_ai = no }
				FIN = {
					add_timed_idea = {
						idea = FIN_perkele
						days = 80
					}
				}
			}
			else = {
				FIN = {
					add_timed_idea = {
						idea = FIN_perkele_AI
						days = 90
					}
				}
			}
		}
	}
	
	FIN_continuationwar = {
	    allowed = {
			always = yes
			#added through on_action
		}
			
		visible = {
			original_tag = FIN
			or = {
				has_offensive_war_with = SOV
				date > 1940.1.1
				has_completed_focus = FIN_preparerevenge
			}
		}

		available = {
			original_tag = FIN
			or = {
				is_in_faction_with = GER
				GER = { has_offensive_war_with = SOV }
			}
			has_completed_focus = FIN_preparerevenge
		}

		ai_will_do = {
			factor = 200
			modifier = {
				factor = 0
				NOT = { GER = { has_war_with = SOV } }
			}
		}
		
		fire_only_once = yes
		
		cost = 20

		complete_effect = {
			#cleanup, no more ai/player different Continuation war modifiers, a buff to 2 years approx. of continuation war, after that soviets started winning.
			add_command_power = -50
			if = {
				limit = { is_ai = no }
				FIN = {
					add_timed_idea = {
						idea = FIN_perkele2
						days = 500
					}
					add_timed_idea = {
						idea = FIN_perkele5
						days = 60
					}
				}
			}
			else = {
				FIN = {
					add_timed_idea = {
						idea = FIN_perkele2 #only defensive stats
						days = 500
					}
					add_timed_idea = {
						idea = FIN_perkele_AI5
						days = 60
					}
				}
			}
			if = {
				limit = { 
					NOT = { is_in_faction_with = SOV } 
					SOV = { exists = yes }
					NOT = { has_war_with = SOV }
				}
				FIN = {
					country_event = {
						id = twevents.74
						days = 1
					}
				}
				declare_war_on = {
					target = SOV
					type = annex_everything
				}

			}
			hidden_effect = {
				news_event = {
					id = news.1306
					days = 1
				}
			}
		}
	}
	
	FIN_forces = {
		allowed = {
			always = yes
		}
			
		visible = {
			original_tag = FIN
			or = {
				date > 1941.1.1
				has_completed_focus = FIN_preparerevenge
			}
		}

		available = {
			original_tag = FIN
			has_war = no
			date > 1941.2.1
			has_completed_focus = FIN_preparerevenge
		}

		ai_will_do = {
			factor = 200
		}
		
		fire_only_once = yes
		
		cost = 40

		complete_effect = {
			custom_effect_tooltip = FIN_force
			hidden_effect = {
				load_oob = FIN_forces
				random_owned_controlled_state = {
					prioritize = { 111 }
					create_unit = { 
						division = "name = \"Finnish Infantry Division\" division_template = \"Jalkaväkidivisioona S.\" start_experience_factor = 0.3" 
						owner = FIN
					}
				}
				random_owned_controlled_state = {
					prioritize = { 111 }
					create_unit = { 
						division = "name = \"Finnish Infantry Division\" division_template = \"Jalkaväkidivisioona S.\" start_experience_factor = 0.3" 
						owner = FIN
					}
				}
				random_owned_controlled_state = {
					prioritize = { 111 }
					create_unit = { 
						division = "name = \"Finnish Infantry Division\" division_template = \"Jalkaväkidivisioona S.\" start_experience_factor = 0.2" 
						owner = FIN
					}
				}
				random_owned_controlled_state = {
					prioritize = { 111 }
					create_unit = { 
						division = "name = \"Finnish Infantry Division\" division_template = \"Jalkaväkidivisioona S.\" start_experience_factor = 0.2" 
						owner = FIN
					}
				}
				if = {
					limit = { is_ai = yes }
					random_owned_controlled_state = {
						prioritize = { 111 }
						create_unit = { 
							division = "name = \"Finnish Infantry Division\" division_template = \"Jalkaväkidivisioona S.\" start_experience_factor = 0.4" 
							owner = FIN
						}
					}
					random_owned_controlled_state = {
						prioritize = { 111 }
						create_unit = { 
							division = "name = \"Finnish Infantry Division\" division_template = \"Jalkaväkidivisioona S.\" start_experience_factor = 0.4" 
							owner = FIN
						}
					}
				}
			}
		}
	}
}
