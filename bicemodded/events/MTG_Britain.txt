add_namespace = mtg_britain 

# Abdication Crisis Edward VIII
#country_event = {
#	id = mtg_britain.1
#	title = mtg_britain.1.t
#	desc = mtg_britain.1.d
#	picture = GFX_report_event_eng_edward_and_wallis
#
#	trigger = {
#		tag = ENG
#		has_country_flag = ENG_king_died
#		date > 1936.6.1
#		NOT = { has_country_flag = ENG_edward_abdicating }
#		has_dlc = "Man the Guns"
#	}
#	
#	fire_only_once = yes
#
#	mean_time_to_happen = { days = 14 }


# rest removed rather than commented out

# Abdication Crisis Edward VIII - King's support coalesces
country_event = {
	id = mtg_britain.2
	title = mtg_britain.2.t
	desc = mtg_britain.2.d
	picture = GFX_report_event_generic_rally

	is_triggered_only = yes
	
	# Ok
	option = {
		name = mtg_britain.2.a
		add_popularity = { ideology = neutrality popularity = 0.1 }
		add_political_power = 100
		add_timed_idea = { idea = ENG_support_for_the_king_idea days = 150 }
		custom_effect_tooltip = mtg_britain.2_tt
		hidden_effect = { country_event = { id = mtg_britain.3 days = 50 } }
	}

	# On second thought, maybe we shouldn't
	option = {
		name = mtg_britain.2.b
		ai_chance = {
			factor = 0
		}
		country_event = { id = mtg_britain.14 days = 40 random_days = 10 }
		set_country_flag = ENG_abdication_crisis_changed_mind
	}
}

# Abdication Crisis Edward VIII - Government falls
country_event = {
	id = mtg_britain.3
	title = mtg_britain.3.t
	desc = mtg_britain.3.d
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes

	trigger = { NOT = { has_country_flag = ENG_abdication_crisis_changed_mind } }
	
	# Ok
	option = {
		name = mtg_britain.3.a
		add_stability = -0.15
		add_political_power = -150
		create_country_leader = {
			name = "Fallen Government"
			desc = "POLITICS_FALLEN_GOVERNMENT_DESC"
			picture = "portrait_eng_fallen_government.dds"
			expire = "1965.1.1"
			ideology = conservatism
			traits = {
				cabinet_crisis
			}
		}
		custom_effect_tooltip = mtg_britain.2_tt
		set_country_flag = ENG_abdication_crisis_government_fell
		hidden_effect = { country_event = { id = mtg_britain.4 days = 50 } }
	}

	# On second thought, maybe we shouldn't
	option = {
		name = mtg_britain.2.b
		ai_chance = {
			factor = 0
		}
		country_event = { id = mtg_britain.14 days = 40 random_days = 10 }
		set_country_flag = ENG_abdication_crisis_changed_mind
	}
}

# Abdication Crisis Edward VIII - Dominions threaten to break away
country_event = {
	id = mtg_britain.4
	title = mtg_britain.4.t
	desc = mtg_britain.4.d
	picture = GFX_report_event_generic_sign_treaty3

	is_triggered_only = yes

	trigger = { NOT = { has_country_flag = ENG_abdication_crisis_changed_mind } }
	
	# Ok
	option = {
		name = mtg_britain.4.a
		add_stability = -0.15
		add_political_power = -100
		if = {
			limit = {
				CAN = { has_country_flag = ENG_abdication_crisis_dominion_will_leave }
				SAF = { has_country_flag = ENG_abdication_crisis_dominion_will_leave }
				RAJ = { has_country_flag = ENG_abdication_crisis_dominion_will_leave }
				AST = { has_country_flag = ENG_abdication_crisis_dominion_will_leave }
				NZL = { has_country_flag = ENG_abdication_crisis_dominion_will_leave }
			}
			dismantle_faction = yes
		}
		remove_from_tech_sharing_group = commonwealth_research
		effect_tooltip = {
			if = {
				limit = {
					CAN = { has_country_flag = ENG_abdication_crisis_dominion_will_leave }
				}
				set_autonomy = { target = CAN autonomy_state = autonomy_free }
			}
			if = {
				limit = {
					SAF = { has_country_flag = ENG_abdication_crisis_dominion_will_leave }
				}
				set_autonomy = { target = SAF autonomy_state = autonomy_free }
			}
			if = {
				limit = {
					RAJ = { has_country_flag = ENG_abdication_crisis_dominion_will_leave }
				}
				set_autonomy = { target = RAJ autonomy_state = autonomy_free }
				RAJ = {
					drop_cosmetic_tag = yes
					retire_country_leader = yes
					remove_from_tech_sharing_group = commonwealth_research
				}
			}
			if = {
				limit = {
					AST = { has_country_flag = ENG_abdication_crisis_dominion_will_leave }
				}
				set_autonomy = { target = AST autonomy_state = autonomy_free }
			}
			if = {
				limit = {
					NZL = { has_country_flag = ENG_abdication_crisis_dominion_will_leave }
				}
				set_autonomy = { target = NZL autonomy_state = autonomy_free }
			}
			if = {
				limit = {
					CAN = { has_country_flag = ENG_abdication_crisis_dominion_will_leave }
				}
				CAN = {
					create_faction = "ENG_commonwealth_of_nations"
					if = {
						limit = {
							SAF = { has_country_flag = ENG_abdication_crisis_dominion_will_leave }
						}
						add_to_faction = SAF
					}
					if = {
						limit = {
							AST = { has_country_flag = ENG_abdication_crisis_dominion_will_leave }
						}
						add_to_faction = AST
					}
					if = {
						limit = {
							NZL = { has_country_flag = ENG_abdication_crisis_dominion_will_leave }
						}
						add_to_faction = NZL
					}
				}
			}
			else_if = {
				limit = {
					SAF = { has_country_flag = ENG_abdication_crisis_dominion_will_leave }
				}
				SAF = {
					create_faction = "ENG_commonwealth_of_nations"
					if = {
						limit = {
							SAF = { has_country_flag = ENG_abdication_crisis_dominion_will_leave }
						}
						add_to_faction = SAF
					}
					if = {
						limit = {
							NZL = { has_country_flag = ENG_abdication_crisis_dominion_will_leave }
						}
						add_to_faction = NZL
					}
				}
			}
			else_if = {
				limit = {
					AST = { has_country_flag = ENG_abdication_crisis_dominion_will_leave }
				}
				AST = {
					create_faction = "ENG_commonwealth_of_nations"
					if = {
						limit = {
							NZL = { has_country_flag = ENG_abdication_crisis_dominion_will_leave }
						}
						add_to_faction = NZL
					}
				}
			}
		}
		custom_effect_tooltip = mtg_britain.2_tt
		hidden_effect = {
			if = {
				limit = {
					CAN = { has_country_flag = ENG_abdication_crisis_dominion_will_leave }
				}
				CAN = {
					country_event = { id = mtg_britain.16 }
					add_ai_strategy = {
						type = alliance
						id = ENG
						value = -200
					}
				}
			}
			if = {
				limit = {
					SAF = { has_country_flag = ENG_abdication_crisis_dominion_will_leave }
				}
				SAF = {
					country_event = { id = mtg_britain.16 }
					add_ai_strategy = {
						type = alliance
						id = ENG
						value = -200
					}
				}
			}
			if = {
				limit = {
					RAJ = { has_country_flag = ENG_abdication_crisis_dominion_will_leave }
				}
				RAJ = {
					country_event = { id = mtg_britain.16 }
					add_ai_strategy = {
						type = alliance
						id = ENG
						value = -200
					}
				}
			}
			if = {
				limit = {
					AST = { has_country_flag = ENG_abdication_crisis_dominion_will_leave }
				}
				AST = {
					country_event = { id = mtg_britain.16 }
					add_ai_strategy = {
						type = alliance
						id = ENG
						value = -200
					}
				}
			}
			if = {
				limit = {
					NZL = { has_country_flag = ENG_abdication_crisis_dominion_will_leave }
				}
				NZL = {
					country_event = { id = mtg_britain.16 }
					add_ai_strategy = {
						type = alliance
						id = ENG
						value = -200
					}
				}
			}
		}
		hidden_effect = { news_event = { id = mtg_news.62 days = 1 } }
	}
}

# Abdication Crisis Edward VIII - Marriage happens
country_event = {
	id = mtg_britain.5
	title = mtg_britain.5.t
	desc = mtg_britain.5.d
	picture = GFX_report_event_royal_parade

	is_triggered_only = yes

	trigger = { NOT = { has_country_flag = ENG_abdication_crisis_changed_mind } }

	immediate = {
		hidden_effect = {
			set_country_flag = edward_viii_married_wallis_simpson
		}
	}
	
	# Ok
	option = {
		name = mtg_britain.5.a
		add_popularity = { ideology = neutrality popularity = 0.05 }
		add_stability = 0.05
		add_political_power = 50
	}
}

# Abdication Crisis Edward VIII - random event generator
country_event = {
	id = mtg_britain.6
	
	is_triggered_only = yes

	hidden = yes

	immediate = {
		random_list = {
			20 = { # Newspapers in favor of marriage
				modifier = {
					factor = 1.5
					has_country_flag = ENG_abdication_crisis_morganatic_marriage
				}
				modifier = {
					factor = 0
					has_country_flag = ENG_newspapers_in_favor
				}
				modifier = {
					factor = 0
					has_country_flag = ENG_newspapers_against
				}
				country_event = { id = mtg_britain.7 }
			}
			20 = { # Newspapers against marriage
				country_event = { id = mtg_britain.8 } 
			}
			20 = { # Prime Minister keeps King on tight leash
				modifier = {
					factor = 0
					has_country_flag = ENG_abdication_crisis_government_fell
				}
				modifier = {
					factor = 0
					has_country_flag = ENG_newspapers_in_favor
				}
				modifier = {
					factor = 0
					has_country_flag = ENG_newspapers_against
				}
				modifier = {
					factor = 0
					has_country_flag = ENG_abdication_crisis_held_radio_speech
				}
				country_event = { id = mtg_britain.9 } 
			}
			20 = { # Parliament Opposition
				modifier = {
					factor = 0.8
					has_idea = ENG_support_for_the_king_idea 
				}
				modifier = {
					factor = 0
					has_country_flag = ENG_abdication_crisis_government_fell
				}
				modifier = {
					factor = 0
					has_country_flag = ENG_parliament_opposition
				}
				country_event = { id = mtg_britain.10 } 
			}
			20 = { # Upper classes oppose marriage
				modifier = {
					factor = 0
					has_country_flag = ENG_upper_classes_oppose_marriage
				}
				country_event = { id = mtg_britain.11 } 
			}
			20 = { # Working class people support marriage
				modifier = {
					factor = 1.5
					has_country_flag = ENG_abdication_crisis_morganatic_marriage
				}
				modifier = {
					factor = 0
					has_country_flag = ENG_upper_classes_support_marriage
				}
				country_event = { id = mtg_britain.12 } 
			}
			200 = { # King gets permission to make radio broadcast for 'his side of the story'
				modifier = {
					factor = 0
					NOT = { has_idea = ENG_support_for_the_king_idea } 
				}
				modifier = {
					factor = 0
					has_country_flag = ENG_abdication_crisis_tight_leash 
				}
				modifier = {
					factor = 0
					has_country_flag = ENG_abdication_crisis_held_radio_speech
				}
				country_event = { id = mtg_britain.13 }
			}
		}
	}
}

# Abdication Crisis Edward VIII - Newspapers in favor of marriage
country_event = {
	id = mtg_britain.7
	title = mtg_britain.7.t
	desc = mtg_britain.7.d
	picture = GFX_report_event_journalists_speech

	is_triggered_only = yes

	trigger = {
		NOT = { has_country_flag = ENG_abdication_crisis_changed_mind }
		NOT = { has_country_flag = edward_viii_married_wallis_simpson }
	}
	
	# Ok
	option = {
		name = mtg_britain.7.a
		add_popularity = { ideology = neutrality popularity = 0.02 }
		add_stability = 0.05
		hidden_effect = { country_event = { id = mtg_britain.6 days = 20 random_days = 10 } }
		clr_country_flag = ENG_newspapers_against
		clr_country_flag = ENG_prime_minister_tight_leash
		clr_country_flag = ENG_parliament_opposition
		clr_country_flag = ENG_upper_classes_oppose_marriage
		clr_country_flag = ENG_working_classes_support_marriage
		set_country_flag = ENG_newspapers_in_favor
	}

	# On second thought, maybe we shouldn't
	option = {
		name = mtg_britain.2.b
		trigger = {
			NOT = { has_country_flag = ENG_abdication_crisis_government_fell }
		}
		ai_chance = {
			factor = 0
		}
		country_event = { id = mtg_britain.14 days = 40 random_days = 10 }
		set_country_flag = ENG_abdication_crisis_changed_mind
	}
}

# Abdication Crisis Edward VIII - Newspapers against marriage
country_event = {
	id = mtg_britain.8
	title = mtg_britain.8.t
	desc = mtg_britain.8.d
	picture = GFX_report_event_journalists_speech

	is_triggered_only = yes

	trigger = {
		NOT = { has_country_flag = ENG_abdication_crisis_changed_mind }
		NOT = { has_country_flag = edward_viii_married_wallis_simpson }
	}
	
	# Ok
	option = {
		name = mtg_britain.8.a
		add_popularity = { ideology = neutrality popularity = -0.02 }
		add_stability = -0.05
		hidden_effect = { country_event = { id = mtg_britain.6 days = 20 random_days = 10 } }
		clr_country_flag = ENG_newspapers_in_favor
		clr_country_flag = ENG_prime_minister_tight_leash
		clr_country_flag = ENG_parliament_opposition
		clr_country_flag = ENG_upper_classes_oppose_marriage
		clr_country_flag = ENG_working_classes_support_marriage
		set_country_flag = ENG_newspapers_against
	}

	# On second thought, maybe we shouldn't
	option = {
		name = mtg_britain.2.b
		trigger = {
			NOT = { has_country_flag = ENG_abdication_crisis_government_fell }
		}
		ai_chance = {
			factor = 0
		}
		country_event = { id = mtg_britain.14 days = 40 random_days = 10 }
		set_country_flag = ENG_abdication_crisis_changed_mind
	}
}

# Abdication Crisis Edward VIII - Prime Minister keeps King on tight leash
country_event = {
	id = mtg_britain.9
	title = mtg_britain.9.t
	desc = mtg_britain.9.d
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes

	trigger = {
		NOT = { has_country_flag = ENG_abdication_crisis_changed_mind }
		NOT = { has_country_flag = ENG_abdication_crisis_government_fell }
		NOT = { has_country_flag = edward_viii_married_wallis_simpson }
	}
	
	# Ok
	option = {
		name = mtg_britain.9.a
		add_political_power = -50
		set_country_flag = { flag = ENG_abdication_crisis_tight_leash value = 1 days = 31 }
		hidden_effect = { country_event = { id = mtg_britain.6 days = 20 random_days = 10 } }
		clr_country_flag = ENG_newspapers_in_favor
		clr_country_flag = ENG_newspapers_against
		clr_country_flag = ENG_parliament_opposition
		clr_country_flag = ENG_upper_classes_oppose_marriage
		clr_country_flag = ENG_working_classes_support_marriage
		set_country_flag = ENG_prime_minister_tight_leash
	}

	# On second thought, maybe we shouldn't
	option = {
		name = mtg_britain.2.b
		trigger = {
			NOT = { has_country_flag = ENG_abdication_crisis_government_fell }
		}
		ai_chance = {
			factor = 0
		}
		country_event = { id = mtg_britain.14 days = 40 random_days = 10 }
		set_country_flag = ENG_abdication_crisis_changed_mind
	}
}

# Abdication Crisis Edward VIII - Parliament opposition
country_event = {
	id = mtg_britain.10
	title = mtg_britain.10.t
	desc = mtg_britain.10.d
	picture = GFX_report_event_generic_parliament

	is_triggered_only = yes

	trigger = {
		NOT = { has_country_flag = ENG_abdication_crisis_changed_mind }
		NOT = { has_country_flag = edward_viii_married_wallis_simpson }
	}	
	# Ok
	option = {
		name = mtg_britain.10.a
		add_political_power = -75
		hidden_effect = { country_event = { id = mtg_britain.6 days = 20 random_days = 10 } }
		clr_country_flag = ENG_newspapers_in_favor
		clr_country_flag = ENG_newspapers_against
		clr_country_flag = ENG_prime_minister_tight_leash
		clr_country_flag = ENG_upper_classes_oppose_marriage
		clr_country_flag = ENG_working_classes_support_marriage
		set_country_flag = ENG_parliament_opposition
	}

	# On second thought, maybe we shouldn't
	option = {
		name = mtg_britain.2.b
		trigger = {
			NOT = { has_country_flag = ENG_abdication_crisis_government_fell }
		}
		ai_chance = {
			factor = 0
		}
		country_event = { id = mtg_britain.14 days = 40 random_days = 10 }
		set_country_flag = ENG_abdication_crisis_changed_mind
	}
}

# Abdication Crisis Edward VIII - Upper classes oppose marriage
country_event = {
	id = mtg_britain.11
	title = mtg_britain.11.t
	desc = mtg_britain.11.d
	picture = GFX_report_event_generic_rally_3

	is_triggered_only = yes

	trigger = {
		NOT = { has_country_flag = ENG_abdication_crisis_changed_mind }
		NOT = { has_country_flag = edward_viii_married_wallis_simpson }
	}	
	# Ok
	option = {
		name = mtg_britain.11.a
		add_popularity = { ideology = neutrality popularity = -0.02 }
		add_stability = -0.05
		add_political_power = -25
		hidden_effect = { country_event = { id = mtg_britain.6 days = 20 random_days = 10 } }
		clr_country_flag = ENG_newspapers_in_favor
		clr_country_flag = ENG_newspapers_against
		clr_country_flag = ENG_prime_minister_tight_leash
		clr_country_flag = ENG_parliament_opposition
		clr_country_flag = ENG_working_classes_support_marriage
		set_country_flag = ENG_upper_classes_oppose_marriage
	}

	# On second thought, maybe we shouldn't
	option = {
		name = mtg_britain.2.b
		trigger = {
			NOT = { has_country_flag = ENG_abdication_crisis_government_fell }
		}
		ai_chance = {
			factor = 0
		}
		country_event = { id = mtg_britain.14 days = 40 random_days = 10 }
		set_country_flag = ENG_abdication_crisis_changed_mind
	}
}

# Abdication Crisis Edward VIII - Working classes support marriage
country_event = {
	id = mtg_britain.12
	title = mtg_britain.12.t
	desc = mtg_britain.12.d
	picture = GFX_report_event_generic_rally

	is_triggered_only = yes

	trigger = {
		NOT = { has_country_flag = ENG_abdication_crisis_changed_mind }
		NOT = { has_country_flag = edward_viii_married_wallis_simpson }
	}	
	# Ok
	option = {
		name = mtg_britain.12.a
		add_popularity = { ideology = neutrality popularity = 0.02 }
		add_stability = 0.05
		hidden_effect = { country_event = { id = mtg_britain.6 days = 20 random_days = 10 } }
		clr_country_flag = ENG_newspapers_in_favor
		clr_country_flag = ENG_newspapers_against
		clr_country_flag = ENG_prime_minister_tight_leash
		clr_country_flag = ENG_parliament_opposition
		clr_country_flag = ENG_upper_classes_oppose_marriage
		set_country_flag = ENG_working_classes_support_marriage
	}

	# On second thought, maybe we shouldn't
	option = {
		name = mtg_britain.2.b
		trigger = {
			NOT = { has_country_flag = ENG_abdication_crisis_government_fell }
		}
		ai_chance = {
			factor = 0
		}
		country_event = { id = mtg_britain.14 days = 40 random_days = 10 }
		set_country_flag = ENG_abdication_crisis_changed_mind
	}
}

# Abdication Crisis Edward VIII - Radio speech
country_event = {
	id = mtg_britain.13
	title = mtg_britain.13.t
	desc = mtg_britain.13.d
	picture = GFX_report_event_journalists_speech

	is_triggered_only = yes

	trigger = {
		NOT = { has_country_flag = ENG_abdication_crisis_changed_mind }
		NOT = { has_country_flag = edward_viii_married_wallis_simpson }
	}
	
	# Ok
	option = {
		name = mtg_britain.13.a
		add_popularity = { ideology = neutrality popularity = 0.05 }
		add_stability = 0.1
		add_political_power = 50
		set_country_flag = ENG_abdication_crisis_held_radio_speech
		hidden_effect = { country_event = { id = mtg_britain.6 days = 20 random_days = 10 } }
	}

	# On second thought, maybe we shouldn't
	option = {
		name = mtg_britain.2.b
		trigger = {
			NOT = { has_country_flag = ENG_abdication_crisis_government_fell }
		}
		ai_chance = {
			factor = 0
		}
		country_event = { id = mtg_britain.14 days = 40 random_days = 10 }
		set_country_flag = ENG_abdication_crisis_changed_mind
	}
}

# King abdicates - Man the Guns version
country_event = {
	id = mtg_britain.14
	title = britain.17.t
	desc = britain.17.d
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			remove_ideas = ENG_king_edward
			add_ideas = ENG_george_vi		
		}
	}

	option = {
		name = britain.17.a
		effect_tooltip = {
			remove_ideas = ENG_king_edward
			add_ideas = ENG_george_vi		
		}
	}
}

# Abdication Crisis Edward VIII - Asking Dominions what they want to do if the King goes through with it
country_event = {
	id = mtg_britain.15
	title = mtg_britain.15.t
	desc = mtg_britain.15.d
	picture = GFX_report_event_generic_parliament

	is_triggered_only = yes
	
	# If he goes through with it, we're out
	option = {
		name = mtg_britain.15.a
		custom_effect_tooltip = mtg_britain.15_tt
		set_country_flag = ENG_abdication_crisis_dominion_will_leave
	}

	# We will support him whatever he decides
	option = {
		name = mtg_britain.15.b
		ai_chance = {
			factor = 0
		}
		custom_effect_tooltip = mtg_britain.15_tt_2
		set_country_flag = ENG_abdication_crisis_dominion_will_stay
		if = {
			limit = {
				has_dlc = "Together for Victory"
			}
			custom_effect_tooltip = ENG_staying_loyal_tt
			if = {
				limit = {
					tag = CAN
				}
				CAN_enforce_loyalty = yes
			}
			if = {
				limit = {
					tag = SAF
				}
				SAF_enforce_loyalty = yes
			}
			if = {
				limit = {
					tag = RAJ
				}
				RAJ_enforce_loyalty = yes
			}
			if = {
				limit = {
					tag = AST
				}
				AST_enforce_loyalty = yes
			}
			if = {
				limit = {
					tag = NZL
				}
				NZL_enforce_loyalty = yes
			}
		}
	}
}

# Abdication Crisis Edward VIII - Notification event for the Dominions that they are leaving the Allies
country_event = {
	id = mtg_britain.16
	title = mtg_britain.16.t
	desc = mtg_britain.16.d
	picture = GFX_report_event_generic_sign_treaty3

	is_triggered_only = yes
	
	# Ok
	option = {
		name = mtg_britain.16.a
		if = {
			limit = {
				tag = CAN
			}
			FROM = { set_autonomy = { target = CAN autonomy_state = autonomy_free } }
			drop_cosmetic_tag = yes
			create_faction = "ENG_commonwealth_of_nations"
			if = {
				limit = {
					SAF = { has_country_flag = ENG_abdication_crisis_dominion_will_leave }
				}
				add_to_faction = SAF
			}
			if = {
				limit = {
					AST = { has_country_flag = ENG_abdication_crisis_dominion_will_leave }
				}
				add_to_faction = AST
			}
			if = {
				limit = {
					NZL = { has_country_flag = ENG_abdication_crisis_dominion_will_leave }
				}
				add_to_faction = NZL
			}
			hidden_effect = {
				every_other_country = {
					limit = {
						NOT = { tag = SAF }
						NOT = { tag = AST }
						NOT = { tag = NZL }
					}
					ROOT = {
						add_ai_strategy = {
							type = alliance
							id = PREV
							value = -200
						}
					}
				}
			}
		}
		if = {
			limit = {
				tag = SAF
			}
			FROM = { set_autonomy = { target = SAF autonomy_state = autonomy_free } }
			if = {
				limit = {
					CAN = { NOT = { has_country_flag = ENG_abdication_crisis_dominion_will_leave } }
					AST = { NOT = { has_country_flag = ENG_abdication_crisis_dominion_will_leave } }
				}
				create_faction = "ENG_commonwealth_of_nations"
				if = {
					limit = {
						NZL = { has_country_flag = ENG_abdication_crisis_dominion_will_leave }
					}
					add_to_faction = NZL
				}
				hidden_effect = {
					every_other_country = {
						limit = {
							NOT = { tag = NZL }
						}
						ROOT = {
							add_ai_strategy = {
								type = alliance
								id = PREV
								value = -200
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				tag = RAJ
			}
			FROM = { set_autonomy = { target = RAJ autonomy_state = autonomy_free } }
			ENG = { remove_from_faction = RAJ }
			RAJ = {
				drop_cosmetic_tag = yes
				retire_country_leader = yes
				remove_from_tech_sharing_group = commonwealth_research
			}
		}
		if = {
			limit = {
				tag = AST
			}
			FROM = { set_autonomy = { target = AST autonomy_state = autonomy_free } }
			if = {
				limit = {
					CAN = { NOT = { has_country_flag = ENG_abdication_crisis_dominion_will_leave } }
				}
				create_faction = "ENG_commonwealth_of_nations"
				if = {
					limit = {
						SAF = { has_country_flag = ENG_abdication_crisis_dominion_will_leave }
					}
					add_to_faction = SAF
				}
				if = {
					limit = {
						NZL = { has_country_flag = ENG_abdication_crisis_dominion_will_leave }
					}
					add_to_faction = NZL
				}
				hidden_effect = {
					every_other_country = {
						limit = {
							NOT = { tag = SAF }
							NOT = { tag = NZL }
						}
						ROOT = {
							add_ai_strategy = {
								type = alliance
								id = PREV
								value = -200
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				tag = NZL
			}
			FROM = { set_autonomy = { target = NZL autonomy_state = autonomy_free } }
		}
	}
}

### END ABDICATION CRISIS ###




# Three-Nation Solution notification event
country_event = {
	id = mtg_britain.20
	title = mtg_britain.20.t
	desc = mtg_britain.20.d
	picture = GFX_report_event_generic_sign_treaty3

	is_triggered_only = yes
	
	# Ok
	option = {
		name = mtg_britain.20.a
		add_opinion_modifier = { target = ENG modifier = ENG_three_nation_solution }
		release = BAN
		ENG = { set_autonomy = { target = BAN autonomy_state = autonomy_colony } }
		BAN = {
			add_ideas = ENG_guided_by_britain_raj_1
		}
		release = PAK
		ENG = { set_autonomy = { target = PAK autonomy_state = autonomy_colony } }
		PAK = {
			add_ideas = ENG_guided_by_britain_raj_1
		}
	}
}

# Towards Indian Independence notification event
country_event = {
	id = mtg_britain.21
	title = mtg_britain.21.t
	desc = mtg_britain.18.d
	picture = GFX_report_event_generic_sign_treaty3

	is_triggered_only = yes
	
	# Ok
	option = {
		name = mtg_britain.18.a
		effect_tooltip = {
			swap_ideas = {
				remove_idea = ENG_guided_by_britain_RAJ_1
				add_idea = ENG_guided_by_britain_RAJ_2
			}
			if = {
				limit = {
					tag = RAJ
					NOT = { is_subject = no }
					NOT = { has_autonomy_state = autonomy_dominion }
					has_dlc = "Together for Victory"
				}
				set_autonomy = { target = RAJ autonomy_state = autonomy_dominion }
			}
			if = {
				limit = {
					tag = PAK
					NOT = { is_subject = no }
					NOT = { has_autonomy_state = autonomy_dominion }
					has_dlc = "Together for Victory"
				}
				set_autonomy = { target = RAJ autonomy_state = autonomy_dominion }
			}
			if = {
				limit = {
					tag = BAN
					NOT = { is_subject = no }
					NOT = { has_autonomy_state = autonomy_dominion }
					has_dlc = "Together for Victory"
				}
				set_autonomy = { target = RAJ autonomy_state = autonomy_dominion }
			}
			retire_country_leader = yes
		}
	}
}

# Motion of No Confidence event
country_event = {
	id = mtg_britain.22
	title = mtg_britain.22.t
	desc = mtg_britain.22.d
	picture = GFX_report_event_generic_parliament

	is_triggered_only = yes
	
	# Ok
	option = {
		name = mtg_britain.22.a
		retire_country_leader = yes
		create_country_leader = {
			name = "Winston Churchill"
			desc = "POLITICS_WINSTON_CHURCHILL_DESC"
			picture = "Portrait_Britain_Winston_Churchill.dds"
			expire = "1965.1.1"
			ideology = conservatism
			traits = {
				british_bulldog
			}
		}
	}
}

# Isolate the Mediterranean Threat event
country_event = {
	id = mtg_britain.23
	title = mtg_britain.23.t
	desc = mtg_britain.23.d
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes
	
	# We will drop the Italians
	option = {
		name = mtg_britain.23.a
		if = {
			limit = {
				ITA = { is_in_faction_with = GER }
				ITA = { has_war = no }
				has_war = no
			}
			GER = { remove_from_faction = ITA }
		}
		FROM = { country_event = { id = mtg_britain.24 hours = 6 } }
		ITA = { country_event = { id = mtg_britain.25 hours = 6 } }
		hidden_effect = {
			GER = {
				add_ai_strategy = {
					type = befriend
					id = ITA
					value = -200
				}
				add_ai_strategy = {
					type = protect
					id = ITA
					value = -200
				}
				add_ai_strategy = {
					type = send_volunteers_desire
					id = ITA
					value = -200
				}
				add_ai_strategy = {
					type = support
					id = ITA
					value = -200
				}
				add_ai_strategy = {
					type = alliance
					id = ITA
					value = -200
				}
			}
			set_country_flag = ENG_ditched_the_italians_flag
			ITA = { set_country_flag = ENG_ditched_by_the_germans_flag }
		}
	}

	# We will stick by the Italians
	option = {
		name = mtg_britain.23.b
		ai_chance = {
			factor = 0
		}
		FROM = { country_event = { id = mtg_britain.26 hours = 6 } }
	}
}

# Isolate the Mediterranean Threat notification event for Britain - Germany accepts
country_event = {
	id = mtg_britain.24
	title = mtg_britain.24.t
	desc = mtg_britain.24.d
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes
	
	# Ok
	option = {
		name = mtg_britain.24.a
		hidden_effect = { news_event = { id = mtg_news.20 days = 1 } }
	}
}

# Isolate the Mediterranean Threat notification event for Italy - Germany dumps them
country_event = {
	id = mtg_britain.25
	title = mtg_britain.25.t
	desc = mtg_britain.25.d
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes
	
	# Ok
	option = {
		name = mtg_britain.25.a
		hidden_effect = {
			add_ai_strategy = {
				type = befriend
				id = GER
				value = -200
			}
			add_ai_strategy = {
				type = protect
				id = GER
				value = -200
			}
			add_ai_strategy = {
				type = send_volunteers_desire
				id = GER
				value = -200
			}
			add_ai_strategy = {
				type = support
				id = GER
				value = -200
			}
			add_ai_strategy = {
				type = alliance
				id = GER
				value = -200
			}
			add_ai_strategy = {
				type = antagonize
				id = GER
				value = 200
			}
		}
	}
}

# Isolate the Mediterranean Threat notification event for Britain - Germany rejects
country_event = {
	id = mtg_britain.26
	title = mtg_britain.26.t
	desc = mtg_britain.26.d
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes
	
	# Ok
	option = {
		name = mtg_britain.26.a
		set_country_flag = ENG_germany_rejected_isolate_the_italian_threat
	}
}

# Alliance with Germany event
country_event = {
	id = mtg_britain.27
	title = mtg_britain.27.t
	desc = mtg_britain.27.d
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes
	
	# Ok
	option = {
		name = mtg_britain.27.a
		effect_tooltip = {
			add_to_faction = FROM
		}
		if = {
			limit = {
				NOT = { is_in_faction = yes }
			}
			create_faction = GER_central_powers_faction
		}
		FROM = { country_event = { id = mtg_britain.28 hours = 6 } }
	}
	# Reject
	option = {
		name = mtg_britain.27.b
		ai_chance = {
			factor = 0
		}
		FROM = { country_event = { id = mtg_britain.29 hours = 6 } }
	}
}

# Alliance with Germany notification event - Germany accepts
country_event = {
	id = mtg_britain.28
	title = mtg_britain.28.t
	desc = mtg_britain.28.d
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes
	
	# Ok
	option = {
		name = excellent
		FROM = { 
			add_to_faction = ROOT
			hidden_effect = {
				add_ai_strategy = {
					type = alliance
					id = ROOT
					value = 200
				}
				add_ai_strategy = {
					type = befriend
					id = ROOT
					value = 200
				}
				add_ai_strategy = {
					type = antagonize
					id = ROOT
					value = -200
				}
			}
		}
		hidden_effect = {
			add_ai_strategy = {
				type = alliance
				id = FROM
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = FROM
				value = 200
			}
			add_ai_strategy = {
				type = antagonize
				id = FROM
				value = -200
			}
			news_event = { id = mtg_news.21 days = 1 }
		}
	}
}

# Alliance with Germany notification event - Germany rejects
country_event = {
	id = mtg_britain.29
	title = mtg_britain.29.t
	desc = mtg_britain.29.d
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes
	
	# Ok
	option = {
		name = unfortunate
	}
}

# Non-Interference Treaty with Germany event
country_event = {
	id = mtg_britain.30
	title = mtg_britain.30.t
	desc = mtg_britain.30.d
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes
	
	# Accept
	option = {
		name = mtg_britain.30.a
		GER = {
			add_opinion_modifier = { target = ENG modifier = ENG_non_interference_treaty }
			reverse_add_opinion_modifier = { target = ENG modifier = ENG_non_interference_treaty }
		}
		effect_tooltip = {
			diplomatic_relation = {
			    country = ENG
			    relation = non_aggression_pact
			    active = yes
			}
		}
		FROM = { country_event = { id = mtg_britain.31 hours = 6 } }
	}

	# Reject
	option = {
		name = mtg_britain.30.b
		ai_chance = {
			factor = 0
		}
		FROM = { country_event = { id = mtg_britain.32 hours = 6 } }
	}
}

# Non-Interference Treaty with Germany notification event - Germany accepts
country_event = {
	id = mtg_britain.31
	title = mtg_britain.31.t
	desc = mtg_britain.31.d
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes
	
	# Ok
	option = {
		name = excellent
		diplomatic_relation = {
		    country = GER
		    relation = non_aggression_pact
		    active = yes
		}
		hidden_effect = {
			FROM = {
				add_ai_strategy = {
					type = antagonize
					id = ROOT
					value = -200
				}
			}
			add_ai_strategy = {
				type = antagonize
				id = FROM
				value = -200
			}
			news_event = { id = mtg_news.22 days = 1 }
		}
	}
}

# Non-Interference Treaty with Germany notification event - Germany rejects
country_event = {
	id = mtg_britain.32
	title = mtg_britain.32.t
	desc = mtg_britain.32.d
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes
	
	# Ok
	option = {
		name = unfortunate
	}
}

########### ALTERNATE HISTORY DISABLED ######
# Organize the Blackshirts civil war event
#country_event = {
#	id = mtg_britain.33
#	title = mtg_britain.33.t
#	desc = mtg_britain.33.d
#	picture = GFX_report_event_ger_civil_war
#
#	fire_only_once = yes
#
#	trigger = {
#		tag = ENG
#		has_completed_focus = ENG_organize_the_blackshirts
#		NOT = { has_government = fascism }
#		has_stability < 0.5
#	}
#	
#	mean_time_to_happen = {
#		days = 2
#	}
#
#	immediate = {
#		hidden_effect = {
#			add_stability = 30
#			every_state = {
#				limit = {
#					is_owned_by = ENG
#					NOT = { has_state_flag = ENG_has_blackshirt_support }
#				}
#				set_state_flag = ENG_has_no_blackshirt_support
#			}
#			random_owned_state = {
#				limit = {
#					has_state_flag = ENG_has_blackshirt_support
#				}
#				ENG = { set_capital = { state = PREV} }
#			}
#			start_civil_war = {
#				ruling_party = fascism
#				ideology = democratic
#				size = 0.5
#				states = all
#				states_filter = {
#					has_state_flag = ENG_has_no_blackshirt_support
#				}
#			}
#			set_politics = {
#				ruling_party = fascism
#				elections_allowed = no
#			}
#			add_popularity = {
#				ideology = fascism
#				popularity = 0.51
#			}
#			add_popularity = {
#				ideology = communism
#				popularity = 0.05
#			}
#			add_popularity = {
#				ideology = democratic
#				popularity = 0.15
#			}
#			random_other_country = {
#				limit = {
#					original_tag = ENG
#					has_government = democratic
#				}
#				save_event_target_as = democratic_uk_civil_war
#				every_unit_leader = {
#					limit = {
#						OR = {
#							has_id = 999
#						}
#					}
#					set_nationality = ENG
#				}
#				ENG = {
#					transfer_navy = { target = PREV }
#					hidden_effect = {
#						every_unit_leader = {
#							limit = {
#								OR = {
#									has_id = 983
#									has_id = 984
#									has_id = 985
#									has_id = 986
#									has_id = 987
#									has_id = 988
#									has_id = 989
#									has_id = 990
#									has_id = 991
#									has_id = 992
#								}
#							}
#							set_nationality = event_target:democratic_uk_civil_war
#						}
#					}
#				}
#			}
#		}
#	}
#	
#	# Ok
#	option = {
#		name = mtg_britain.33.a
#		custom_effect_tooltip = ENG_democratic_civil_war_tt
#		hidden_effect = {
#			RAJ = { retire_country_leader = yes }
#		}
#		hidden_effect = { news_event = { id = mtg_news.41 days = 1 } }
#	}
#}

# End of British Fascist Civil War event
country_event = {
	id = mtg_britain.34
	title = mtg_britain.34.t
	desc = mtg_britain.34.d
	picture = GFX_report_event_fascist_speech

	is_triggered_only = yes
	
	# Ok
	option = {
		name = mtg_britain.34.a
		add_ideas = ENG_george_vi
		hidden_effect = {
			RAJ = {
				leave_faction = yes
				drop_cosmetic_tag = yes
				retire_country_leader = yes
			}
			MAL = {
				drop_cosmetic_tag = yes
				retire_country_leader = yes
			}
			CAN = {
				if = {
					limit = {
						has_completed_focus = CAN_strengthen_the_commonwealth_ties
					}
					set_faction_name = "ENG_commonwealth_of_nations"
					every_other_country = {
						limit = {
							NOT = { tag = SAF }
							NOT = { tag = AST }
							NOT = { tag = NZL }
						}
						CAN = {
							add_ai_strategy = {
								type = alliance
								id = PREV
								value = -200
							}
						}
					}
				}
			}
		}
		custom_effect_tooltip = mtg_britain.34_tt
		hidden_effect = { news_event = { id = mtg_news.42 days = 1 } }
		delete_unit_template_and_units = { division_template = "Blackshirt Brigade" }
	}
}

# March on Downing Street event
country_event = {
	id = mtg_britain.35
	title = mtg_britain.35.t
	desc = mtg_britain.35.d
	picture = GFX_report_event_eng_mosley_march_on_downing_street

	is_triggered_only = yes
	
	# Ok
	option = {
		name = mtg_britain.35.a
		set_politics = { ruling_party = fascism elections_allowed = no }
		#add_timed_idea = { idea = ENG_restoring_public_order days = 365 }
	}
}

# Secure the Italian Alliance event for Italy
country_event = {
	id = mtg_britain.36
	title = mtg_britain.36.t
	desc = mtg_britain.36.d
	picture = GFX_report_event_eng_mosley_mussolini

	is_triggered_only = yes
	
	# Accept
	option = {
		name = mtg_britain.36.a
		FROM = {
			if = {
				limit = {
					is_in_faction = no
				}
				create_faction = anglo_italian_pact
			}
			add_to_faction = ROOT
			country_event = { id = mtg_britain.37 hours = 6 }
			hidden_effect = {
				add_ai_strategy = {
					type = alliance
					id = ROOT
					value = 200
				}
				add_ai_strategy = {
					type = befriend
					id = ROOT
					value = 200
				}
				add_ai_strategy = {
					type = antagonize
					id = ROOT
					value = -200
				}
			}
		}
		hidden_effect = {
			add_ai_strategy = {
				type = alliance
				id = FROM
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = FROM
				value = 200
			}
			add_ai_strategy = {
				type = antagonize
				id = FROM
				value = -200
			}
		}
	}

	# Reject
	option = {
		name = mtg_britain.36.b
		ai_chance = {
			factor = 0
		}
		FROM = { country_event = { id = mtg_britain.38 hours = 6 } }
	}
}

# Secure the Italian Alliance acceptance event for Britain
country_event = {
	id = mtg_britain.37
	title = mtg_britain.37.t
	desc = mtg_britain.37.d
	picture = GFX_report_event_eng_mosley_mussolini

	is_triggered_only = yes
	
	# Ok
	option = {
		name = excellent
		FRA = { country_event = { id = mtg_britain.39 hours = 6 } }
		effect_tooltip = {
			add_to_faction = FROM
		}
		hidden_effect = { news_event = { id = mtg_news.24 days = 1 } }
	}
}

# Secure the Italian Alliance rejection event for Britain
country_event = {
	id = mtg_britain.38
	title = mtg_britain.38.t
	desc = mtg_britain.38.d
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes
	
	# Ok
	option = {
		name = unfortunate
	}
}

# Secure the Italian Alliance event telling France they're out
country_event = {
	id = mtg_britain.39
	title = mtg_britain.39.t
	desc = mtg_britain.39.d
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes
	
	# Ok
	option = {
		name = mtg_britain.39.a
		effect_tooltip = { ENG = { remove_from_faction = ROOT } }
	}
}

# Gibraltar for Spanish Support event for Spain
country_event = {
	id = mtg_britain.40
	title = mtg_britain.40.t
	desc = mtg_britain.40.d
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes
	
	# Accept
	option = {
		name = mtg_britain.40.a
		transfer_state = 118
		FROM = {
			add_to_faction = ROOT
			country_event = { id = mtg_britain.36 hours = 6 }
			hidden_effect = {
				add_ai_strategy = {
					type = alliance
					id = ROOT
					value = 200
				}
				add_ai_strategy = {
					type = befriend
					id = ROOT
					value = 200
				}
				add_ai_strategy = {
					type = antagonize
					id = ROOT
					value = -200
				}
			}
		}
		hidden_effect = {
			add_ai_strategy = {
				type = alliance
				id = FROM
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = FROM
				value = 200
			}
			add_ai_strategy = {
				type = antagonize
				id = FROM
				value = -200
			}
		}
	}

	# Reject
	option = {
		name = mtg_britain.40.b
		ai_chance = {
			factor = 0
		}
		FROM = { country_event = { id = mtg_britain.37 hours = 6 } }
	}
}

# Gibraltar for Spanish Support acceptance event for Britain
country_event = {
	id = mtg_britain.41
	title = mtg_britain.41.t
	desc = mtg_britain.41.d
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes
	
	# Ok
	option = {
		name = excellent
		effect_tooltip = {
			FROM = { transfer_state = 118 }
			add_to_faction = FROM
		}
		hidden_effect = { news_event = { id = mtg_news.25 days = 1 } }
	}
}

# Gibraltar for Spanish Support rejection event for Britain
country_event = {
	id = mtg_britain.42
	title = mtg_britain.42.t
	desc = mtg_britain.42.d
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes
	
	# Ok
	option = {
		name = unfortunate
	}
}

# Eliminate the Upper Class event
country_event = {
	id = mtg_britain.45
	title = mtg_britain.45.t
	desc = mtg_britain.45.d
	picture = GFX_report_event_journalists_speech

	is_triggered_only = yes
	
	# Get rid of them all
	option = {
		name = mtg_britain.45.a
		remove_unit_leader = 997
		remove_unit_leader = 996
		remove_unit_leader = 995
		remove_unit_leader = 994
		remove_unit_leader = 993
		remove_unit_leader = 998
		remove_unit_leader = 983
		remove_unit_leader = 984
		remove_unit_leader = 987
		remove_unit_leader = 988
		random_owned_controlled_state = {
			limit = {
				free_building_slots = {
					building = industrial_complex
					size > 1
					include_locked = yes
				}
				is_core_of = ROOT
			}
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = industrial_complex
				level = 2
				instant_build = yes
			}
			set_state_flag = ENG_upper_classes_2IC
		}
		random_owned_controlled_state = {
			limit = {
				free_building_slots = {
					building = industrial_complex
					size > 1
					include_locked = yes
				}
				is_core_of = ROOT
			}
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = industrial_complex
				level = 2
				instant_build = yes
			}
			set_state_flag = ENG_upper_classes_2IC
		}
		random_owned_controlled_state = {
			limit = {
				is_in_home_area = yes
				free_building_slots = {
					building = arms_factory
					size > 1
					include_locked = yes
				}
			}
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = arms_factory
				level = 2
				instant_build = yes
			}
			set_state_flag = ENG_upper_classes_2AF
		}
		random_owned_controlled_state = {
			limit = {
				is_in_home_area = yes
				free_building_slots = {
					building = arms_factory
					size > 1
					include_locked = yes
				}
			}
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = arms_factory
				level = 2
				instant_build = yes
			}
			set_state_flag = ENG_upper_classes_2AF
		}
	}
}

# Enforce Decolonization event - release or else!!!!
country_event = {
	id = mtg_britain.46
	title = mtg_britain.46.t
	desc = mtg_britain.46.d
	picture = GFX_report_event_communist_leader

	is_triggered_only = yes
	
	# Accept - We will release
	option = {
		name = mtg_britain.46.a
		ai_chance = {
			factor = 34
			modifier = {
				factor = 1.5
				strength_ratio = {
					tag = ENG
					ratio < 0.5
				}
			}
			modifier = {
				factor = 2
				strength_ratio = {
					tag = ENG
					ratio < 0.3
				}
			}
			modifier = {
				factor = 2
				strength_ratio = {
					tag = ENG
					ratio < 0.2
				}
			}
			modifier = {
				factor = 2
				strength_ratio = {
					tag = ENG
					ratio < 0.1
				}
			}
			modifier = {
				factor = 0
				strength_ratio = {
					tag = ENG
					ratio > 1.6
				}
			}
		}
		if = {
			limit = {
				NOT = { original_tag = PUE }
				owns_state = 686
				has_full_control_of_state = 686
			}
			release = PUE
		}
		if = {
			limit = {
				PUE = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = PUE autonomy_state = autonomy_free }
			PUE = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = "PAN" }
				owns_state = 685
				has_full_control_of_state = 685
			}
			"PAN" = { transfer_state = 685 }
		}
		if = {
			limit = {
				"PHI" = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = PHI autonomy_state = autonomy_free }
			"PHI" = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = CRC }
				owns_state = 695
				has_full_control_of_state = 695
			}
			release = CRC
		}
		if = {
			limit = {
				CRC = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = CRC autonomy_state = autonomy_free }
			CRC = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = SUR }
				owns_state = 309
				has_full_control_of_state = 309
			}
			release = SUR
		}
		if = {
			limit = {
				SUR = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = SUR autonomy_state = autonomy_free }
			SUR = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = SUR }
				owns_state = 309
				has_full_control_of_state = 309
			}
			release = SUR
		}
		if = {
			limit = {
				INS = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = INS autonomy_state = autonomy_free }
			INS = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = INS }
				owns_state = 335
				has_full_control_of_state = 335
				owns_state = 672
				has_full_control_of_state = 672
				owns_state = 334
				has_full_control_of_state = 334
				owns_state = 673
				has_full_control_of_state = 673
				owns_state = 667
				has_full_control_of_state = 667
				owns_state = 309
				has_full_control_of_state = 309
				owns_state = 668
				has_full_control_of_state = 668
				owns_state = 738
				has_full_control_of_state = 738
				owns_state = 669
				has_full_control_of_state = 669
			}
			release = INS
		}
		if = {
			limit = {
				NOT = { original_tag = COG }
				owns_state = 295
				has_full_control_of_state = 295
				owns_state = 538
				has_full_control_of_state = 538
				owns_state = 718
				has_full_control_of_state = 718
			}
			release = COG
		}
		if = {
			limit = {
				COG = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = COG autonomy_state = autonomy_free }
			COG = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = RWA }
				owns_state = 768
				has_full_control_of_state = 768
			}
			release = RWA
		}
		if = {
			limit = {
				RWA = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = RWA autonomy_state = autonomy_free }
			RWA = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = BRD }
				owns_state = 769
				has_full_control_of_state = 769
			}
			release = BRD
		}
		if = {
			limit = {
				BRD = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = BRD autonomy_state = autonomy_free }
			BRD = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = GDL }
				owns_state = 694
				has_full_control_of_state = 694
			}
			release = GDL
		}
		if = {
			limit = {
				GDL = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = GDL autonomy_state = autonomy_free }
			GDL = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = CAY }
				owns_state = 310
				has_full_control_of_state = 310
			}
			release = CAY
		}
		if = {
			limit = {
				CAY = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = CAY autonomy_state = autonomy_free }
			CAY = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = SYR }
				owns_state = 677
				has_full_control_of_state = 677
				owns_state = 680
				has_full_control_of_state = 680
				owns_state = 554
				has_full_control_of_state = 554
			}
			release = SYR
		}
		if = {
			limit = {
				SYR = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = SYR autonomy_state = autonomy_free }
			SYR = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = LEB }
				owns_state = 553
				has_full_control_of_state = 553
			}
			release = LEB
		}
		if = {
			limit = {
				LEB = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = LEB autonomy_state = autonomy_free }
			LEB = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = MAD }
				owns_state = 543
				has_full_control_of_state = 543
			}
			release = MAD
		}
		if = {
			limit = {
				MAD = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = MAD autonomy_state = autonomy_free }
			MAD = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = MOR }
				owns_state = 461
				has_full_control_of_state = 461
				owns_state = 462
				has_full_control_of_state = 462
			}
			release = MOR
		}
		if = {
			limit = {
				MOR = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = MOR autonomy_state = autonomy_free }
			MOR = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = ALG }
				owns_state = 459
				has_full_control_of_state = 459
				owns_state = 513
				has_full_control_of_state = 513
				owns_state = 460
				has_full_control_of_state = 460
				owns_state = 514
				has_full_control_of_state = 514
			}
			release = ALG
		}
		if = {
			limit = {
				ALG = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = ALG autonomy_state = autonomy_free }
			ALG = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = TUN }
				owns_state = 458
				has_full_control_of_state = 458
				owns_state = 665
				has_full_control_of_state = 665
			}
			release = TUN
		}
		if = {
			limit = {
				TUN = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = TUN autonomy_state = autonomy_free }
			TUN = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = RCG }
				owns_state = 772
				has_full_control_of_state = 772
			}
			release = RCG
		}
		if = {
			limit = {
				RCG = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = RCG autonomy_state = autonomy_free }
			RCG = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = GAB }
				owns_state = 539
				has_full_control_of_state = 539
			}
			release = GAB
		}
		if = {
			limit = {
				GAB = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = GAB autonomy_state = autonomy_free }
			GAB = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = CMR }
				owns_state = 773
				has_full_control_of_state = 773
			}
			release = CMR
		}
		if = {
			limit = {
				CMR = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = CMR autonomy_state = autonomy_free }
			CMR = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = CAR }
				owns_state = 660
				has_full_control_of_state = 660
			}
			release = CAR
		}
		if = {
			limit = {
				CAR = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = CAR autonomy_state = autonomy_free }
			CAR = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = CHA }
				owns_state = 774
				has_full_control_of_state = 774
				owns_state = 775
				has_full_control_of_state = 775
			}
			release = CHA
		}
		if = {
			limit = {
				CHA = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = CHA autonomy_state = autonomy_free }
			CHA = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = NGR }
				owns_state = 515
				has_full_control_of_state = 515
				owns_state = 781
				has_full_control_of_state = 781
			}
			release = NGR
		}
		if = {
			limit = {
				NGR = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = NGR autonomy_state = autonomy_free }
			NGR = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = DAH }
				owns_state = 776
				has_full_control_of_state = 776
			}
			release = DAH
		}
		if = {
			limit = {
				DAH = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = DAH autonomy_state = autonomy_free }
			DAH = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = TOG }
				owns_state = 777
				has_full_control_of_state = 777
			}
			release = TOG
		}
		if = {
			limit = {
				TOG = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = TOG autonomy_state = autonomy_free }
			TOG = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = VOL }
				owns_state = 778
				has_full_control_of_state = 778
			}
			release = VOL
		}
		if = {
			limit = {
				VOL = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = VOL autonomy_state = autonomy_free }
			VOL = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = IVO }
				owns_state = 779
				has_full_control_of_state = 779
			}
			release = IVO
		}
		if = {
			limit = {
				IVO = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = IVO autonomy_state = autonomy_free }
			IVO = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = MLI }
				owns_state = 556
				has_full_control_of_state = 556
				owns_state = 782
				has_full_control_of_state = 782
			}
			release = MLI
		}
		if = {
			limit = {
				MLI = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = MLI autonomy_state = autonomy_free }
			MLI = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = SEN }
				owns_state = 272
				has_full_control_of_state = 272
			}
			release = SEN
		}
		if = {
			limit = {
				SEN = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = SEN autonomy_state = autonomy_free }
			SEN = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = CAY }
				owns_state = 310
				has_full_control_of_state = 310
			}
			release = CAY
		}
		if = {
			limit = {
				CAY = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = CAY autonomy_state = autonomy_free }
			CAY = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = GNA }
				owns_state = 780
				has_full_control_of_state = 780
			}
			release = GNA
		}
		if = {
			limit = {
				GNA = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = GNA autonomy_state = autonomy_free }
			GNA = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = LAO }
				owns_state = 670
				has_full_control_of_state = 670
			}
			release = LAO
		}
		if = {
			limit = {
				LAO = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = LAO autonomy_state = autonomy_free }
			LAO = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = CAM }
				owns_state = 741
				has_full_control_of_state = 741
			}
			release = CAM
		}
		if = {
			limit = {
				CAM = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = CAM autonomy_state = autonomy_free }
			CAM = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = VIN }
				owns_state = 671
				has_full_control_of_state = 671
				owns_state = 286
				has_full_control_of_state = 286
			}
			release = VIN
		}
		if = {
			limit = {
				VIN = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = VIN autonomy_state = autonomy_free }
			VIN = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = event_target:WTT_current_china_leader }
				owns_state = 728
				has_full_control_of_state = 728
			}
			event_target:WTT_current_china_leader = { transfer_state = 728 }
		}
		if = {
			limit = {
				NOT = { original_tag = ANG }
				owns_state = 540
				has_full_control_of_state = 540
			}
			release = ANG
		}
		if = {
			limit = {
				ANG = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = ANG autonomy_state = autonomy_free }
			ANG = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = GNB }
				owns_state = 296
				has_full_control_of_state = 296
			}
			release = GNB
		}
		if = {
			limit = {
				GNB = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = GNB autonomy_state = autonomy_free }
			GNB = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = MZB }
				owns_state = 544
				has_full_control_of_state = 544
			}
			release = MZB
		}
		if = {
			limit = {
				MZB = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = MZB autonomy_state = autonomy_free }
			MZB = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = event_target:WTT_current_china_leader }
				owns_state = 729
				has_full_control_of_state = 729
			}
			event_target:WTT_current_china_leader = { transfer_state = 729 }
		}
		if = {
			limit = {
				NOT = { original_tag = INS }
				owns_state = 721
				has_full_control_of_state = 721
			}
			INS = { transfer_state = 721 }
		}
		if = {
			limit = {
				NOT = { original_tag = WES }
				owns_state = 699
				has_full_control_of_state = 699
			}
			release = WES
		}
		if = {
			limit = {
				WES = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = WES autonomy_state = autonomy_free }
			WES = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = MOR }
				owns_state = 290
				has_full_control_of_state = 290
			}
			MOR = { transfer_state = 290 }
		}
		if = {
			limit = {
				NOT = { original_tag = MOR }
				owns_state = 783
				has_full_control_of_state = 783
			}
			MOR = { transfer_state = 783 }
		}
		if = {
			limit = {
				NOT = { original_tag = LBA }
				owns_state = 448
				has_full_control_of_state = 448
				owns_state = 661
				has_full_control_of_state = 661
				owns_state = 449
				has_full_control_of_state = 449
				owns_state = 662
				has_full_control_of_state = 662
				owns_state = 450
				has_full_control_of_state = 450
				owns_state = 451
				has_full_control_of_state = 451
				owns_state = 663
				has_full_control_of_state = 663
				owns_state = 273
				has_full_control_of_state = 273
			}
			release = LBA
		}
		if = {
			limit = {
				LBA = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = LBA autonomy_state = autonomy_free }
			LBA = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = ERI }
				owns_state = 550
				has_full_control_of_state = 550
			}
			release = ERI
		}
		if = {
			limit = {
				ERI = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = ERI autonomy_state = autonomy_free }
			ERI = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = SOM }
				owns_state = 559
				has_full_control_of_state = 559
			}
			release = SOM
		}
		if = {
			limit = {
				SOM = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = SOM autonomy_state = autonomy_free }
			SOM = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = ETH }
				owns_state = 271
				has_full_control_of_state = 271
			}
			release = ETH
		}
		if = {
			limit = {
				ETH = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = ETH autonomy_state = autonomy_free }
			ETH = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = KOR }
				owns_state = 527
				has_full_control_of_state = 527
				owns_state = 525
				has_full_control_of_state = 525
			}
			release = KOR
		}
		if = {
			limit = {
				KOR = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = KOR autonomy_state = autonomy_free }
			KOR = { leave_faction = yes }
		}
		if = {
			limit = {
				MAN = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = MAN autonomy_state = autonomy_free }
			MAN = { leave_faction = yes }
		}
		if = {
			limit = {
				MEN = {
					is_subject_of = ROOT
				}
			}
			set_autonomy = { target = MEN autonomy_state = autonomy_free }
			MEN = { leave_faction = yes }
		}
		if = {
			limit = {
				NOT = { original_tag = event_target:WTT_current_china_leader }
				owns_state = 609
				has_full_control_of_state = 609
			}
			event_target:WTT_current_china_leader = { transfer_state = 609 }
		}
		if = {
			limit = {
				NOT = { original_tag = event_target:WTT_current_china_leader }
				owns_state = 745
				has_full_control_of_state = 745
			}
			event_target:WTT_current_china_leader = { transfer_state = 745 }
		}
		if = {
			limit = {
				NOT = { original_tag = event_target:WTT_current_china_leader }
				owns_state = 524
				has_full_control_of_state = 524
			}
			event_target:WTT_current_china_leader = { transfer_state = 524 }
		}
		FROM = { country_event = { id = mtg_britain.47 hours = 6 } }
	}

	# Reject - We will NOT release
	option = {
		name = mtg_britain.46.b
		ai_chance = {
			factor = 66
			modifier = {
				factor = 1.5
				strength_ratio = {
					tag = ENG
					ratio > 0.7
				}
			}
			modifier = {
				factor = 2
				strength_ratio = {
					tag = ENG
					ratio > 0.85
				}
			}
			modifier = {
				factor = 2
				strength_ratio = {
					tag = ENG
					ratio > 1
				}
			}
			modifier = {
				factor = 2
				strength_ratio = {
					tag = ENG
					ratio > 1.2
				}
			}
			modifier = {
				factor = 2
				strength_ratio = {
					tag = ENG
					ratio > 1.4
				}
			}
		}
		FROM = { country_event = { id = mtg_britain.48 hours = 6 } }
		effect_tooltip = {
			FROM = { 
				create_wargoal = {
					type = puppet_wargoal_focus
					target = ROOT
				}
			}
		}
	}
}

# Enforce Decolonization event - FROM has released
country_event = {
	id = mtg_britain.47
	title = mtg_britain.47.t
	desc = mtg_britain.47.d
	picture = GFX_report_event_generic_sign_treaty3

	is_triggered_only = yes
	
	# Ok
	option = {
		name = mtg_britain.47.a
	}
}

# Enforce Decolonization event - FROM has refused to release!
country_event = {
	id = mtg_britain.48
	title = mtg_britain.48.t
	desc = mtg_britain.48.d
	picture = GFX_report_event_british_inspect_troops

	is_triggered_only = yes
	
	# Ok
	option = {
		name = mtg_britain.48.a
		create_wargoal = {
			type = puppet_wargoal_focus
			target = FROM
		}
	}
}

# Soviet Cooperation - event for SOV - Wanna gang up on GER?
country_event = {
	id = mtg_britain.49
	title = mtg_britain.49.t
	desc = mtg_britain.49.d
	picture = GFX_report_event_generic_conference

	is_triggered_only = yes
	
	# Sounds great!
	option = {
		name = mtg_britain.49.a
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				has_war = yes
				surrender_progress > 0.01
			}
		}
		FROM = { country_event = { id = mtg_britain.50 hours = 6 } }
		effect_tooltip = {
			FROM = {
				create_wargoal = {
					type = puppet_wargoal_focus
					target = GER
				}
			}
			create_wargoal = {
				type = puppet_wargoal_focus
				target = GER
			}
		}
	}

	# Nah ty
	option = {
		name = mtg_britain.49.b
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				has_war = no
			}
		}
		FROM = { country_event = { id = mtg_britain.51 hours = 6 } }
	}
}

# Soviet Cooperation - event for ENG - SOV accepted
country_event = {
	id = mtg_britain.50
	title = mtg_britain.50.t
	desc = mtg_britain.50.d
	picture = GFX_report_event_hitler_handshake

	is_triggered_only = yes
	
	# Ok
	option = {
		name = mtg_britain.50.a
		create_wargoal = {
			type = puppet_wargoal_focus
			target = GER
		}
		FROM = {
			create_wargoal = {
				type = puppet_wargoal_focus
				target = GER
			}
		}
	}
}

# Soviet Cooperation - event for ENG - SOV rejected
country_event = {
	id = mtg_britain.51
	title = mtg_britain.51.t
	desc = mtg_britain.51.d
	picture = GFX_report_event_generic_conference

	is_triggered_only = yes
	
	# Ok
	option = {
		name = mtg_britain.51.a
		create_wargoal = {
			type = puppet_wargoal_focus
			target = GER
		}
	}
}

# Follow Moscow - event for SOV - Wanna have ENG in your faction?
country_event = {
	id = mtg_britain.52
	title = mtg_britain.52.t
	desc = mtg_britain.52.d
	picture = GFX_report_event_generic_sign_treaty3

	is_triggered_only = yes
	
	# Sounds great!
	option = {
		name = mtg_britain.52.a
		FROM = { country_event = { id = mtg_britain.53 hours = 6 } }
		effect_tooltip = {
			add_to_faction = ENG
		}
	}

	# Nah ty
	option = {
		name = mtg_britain.52.b
		ai_chance = {
			factor = 0
		}
		FROM = { country_event = { id = mtg_britain.54 hours = 6 } }
	}
}

# Follow Moscow - event for ENG - SOV accepts
country_event = {
	id = mtg_britain.53
	title = mtg_britain.53.t
	desc = mtg_britain.53.d
	picture = GFX_report_event_generic_sign_treaty3

	is_triggered_only = yes
	
	# Ok
	option = {
		name = excellent
		FROM = { add_to_faction = ENG }
	}
}

# Follow Moscow - event for ENG - SOV rejects
country_event = {
	id = mtg_britain.54
	title = mtg_britain.54.t
	desc = mtg_britain.54.d
	picture = GFX_report_event_generic_sign_treaty3

	is_triggered_only = yes
	
	# Ok
	option = {
		name = unfortunate
	}
}

############ ALTERNATE HISTORY DISABLED
#
# Communist civil war event
#country_event = {
#	id = mtg_britain.55
#	title = mtg_britain.55.t
#	desc = mtg_britain.55.d
#	picture = GFX_report_event_ger_civil_war
#
#	fire_only_once = yes
#
#	trigger = {
#		tag = ENG
#		has_completed_focus = ENG_concessions_to_the_trade_unions
#		NOT = { has_completed_focus = ENG_decolonization }
#		has_government = communism
#		has_country_flag = ENG_switched_to_communism_civil_war_flag
#		NOT = { has_country_flag = ENG_switched_to_communism_civil_war_timer_flag }
#	}
#	
#	mean_time_to_happen = {
#		days = 2
#	}
#
#	immediate = {
#		hidden_effect = {
#			if = {
#				limit = {
#					has_country_leader = {
#						name = "Harry Pollitt"
#						ruling_only = yes
#					}
#				}
#				set_country_flag = harry_pollitt
#			}
#			if = {
#				limit = {
#					has_country_leader = {
#						name = "Rajani Palme Dutt"
#						ruling_only = yes
#					}
#				}
#				set_country_flag = rajani_palme_dutt
#			}
#			set_country_flag = ENG_communist_civil_war
#			set_variable = {
#				var = civil_war_size_var
#				value = party_popularity@communism
#			}
#			if = {
#				limit = {
#					check_variable = {
#						var = civil_war_size_var
#						value = 0.5
#						compare = less_than
#					}
#				}
#				set_variable = {
#					var = civil_war_size_var
#					value = 0.5
#				}
#			}
#			start_civil_war = {
#				ruling_party = communism
#				ideology = communism
#				size = civil_war_size_var
#			}
#			random_other_country = {
#				limit = {
#					original_tag = ENG
#					has_government = communism
#				}
#				retire_country_leader = yes
#				retire_country_leader = yes
#				set_cosmetic_tag = ENG_communist_civil_war
#				set_country_flag = ENG_communist_civil_war
#			}
#			add_popularity = {
#				ideology = communism
#				popularity = 0.4
#			}
#			add_popularity = {
#				ideology = fascism
#				popularity = 0.1
#			}
#			add_popularity = {
#				ideology = neutrality
#				popularity = 0.2
#			}
#			if = {
#				limit = {
#					has_country_flag = harry_pollitt
#				}
#				create_country_leader = {
#					name = "Harry Pollitt"
#					desc = "POLITICS_HARRY_POLLITT_DESC"
#					picture = "portrait_eng_harry_pollitt.dds"
#					expire = "1965.1.1"
#					ideology = leninism
#					traits = {
#						staunch_stalinist
#					}
#				}
#			}
#			if = {
#				limit = {
#					has_country_flag = rajani_palme_dutt
#				}
#				create_country_leader = {
#					name = "Rajani Palme Dutt"
#					desc = "POLITICS_PALME_DUTT_DESC"
#					picture = "Portrait_Britain_Palme_Dutt.dds"
#					expire = "1965.1.1"
#					ideology = leninism
#					traits = {
#						comintern_workhorse
#					}
#				}
#			}
#		}
#	}
#	
#	# Ok
#	option = {
#		name = mtg_britain.55.a
#		custom_effect_tooltip = ENG_communist_civil_war_tt
#		clr_country_flag = ENG_switched_to_communism_civil_war_flag
#		hidden_effect = { news_event = { id = mtg_news.43 days = 1 } }
#	}
#}


# Appeal to Imperial Loyalists event for dominions
country_event = {
	id = mtg_britain.61
	title = mtg_britain.61.t
	desc = mtg_britain.61.d
	picture = GFX_report_event_french_resistance_02

	is_triggered_only = yes
	
	# The British are plotting!
	option = {
		name = mtg_britain.61.a
	}
}




# Event for Iran/Afghanistan demanding puppet status
country_event = {
	id = mtg_britain.79
	title = mtg_britain.79.t
	desc = mtg_britain.79.d
	picture = GFX_report_event_generic_sign_treaty3

	is_triggered_only = yes
	
	# We have no choice
	option = {
		name = mtg_britain.79.a
		ai_chance = {
			base = 50
			modifier = {
				factor = 0
				strength_ratio = { tag = ENG ratio > 1 }
			}
		}
		effect_tooltip = {
			ENG = {
				puppet = ROOT
			}
		}
		FROM = { country_event = { id = mtg_britain.80 hours = 6 } }
		hidden_effect = { news_event = { id = mtg_news.28 hours = 30 } }
	}

	# Never!
	option = {
		name = mtg_britain.79.b
		ai_chance = {
			base = 50
			modifier = {
				factor = 0.8
				strength_ratio = { tag = ENG ratio < 0.5 }
			}
			modifier = {
				factor = 0.8
				has_opinion = { target = ENG value > 99 }
			}
			modifier = {
				factor = 0.8
				strength_ratio = { tag = ENG ratio < 0.3 }
			}
			modifier = {
				factor = 0.8
				strength_ratio = { tag = ENG ratio < 0.2 }
			}
			modifier = {
				factor = 0.5
				strength_ratio = { tag = ENG ratio < 0.1 }
			}
		}
			#modifier = {
			#	factor = 0.8
			#	SOV = { has_completed_focus = SOV_anti_colonialist_rebels } ####FOCUS DOESN'T EXIST.
			#}
			#modifier = {
			#	factor = 0
			#	OR = {
			#		SOV = {
			#			focus_progress = { focus = SOV_southern_thrust progress > 0 } ####FOCUS DOESN'T EXIST.
			#			has_completed_focus = SOV_southern_thrust ####FOCUS DOESN'T EXIST.
			#		}
			#		has_war_with = SOV
			#	}
			#}
		
		effect_tooltip = {
			if = {
				limit = {
					tag = PER
				}
				create_wargoal = {
					type = puppet_wargoal_focus
					target = PER
				}
			}
			if = {
				limit = {
					tag = AFG
				}
				create_wargoal = {
					type = puppet_wargoal_focus
					target = AFG
				}
			}
		}
		FROM = { country_event = { id = mtg_britain.81 hours = 6 } }
		hidden_effect = { news_event = { id = mtg_news.29 hours = 30 } }
	}
}

# Event for ENG that PER/AFG accepted puppet status
country_event = {
	id = mtg_britain.80
	title = mtg_britain.80.t
	desc = mtg_britain.80.d
	picture = GFX_report_event_generic_sign_treaty3

	is_triggered_only = yes
	
	# Ok
	option = {
		name = mtg_britain.80.a
		puppet = FROM
	}
}

# Event for ENG that PER/AFG rejected puppet status
country_event = {
	id = mtg_britain.81
	title = mtg_britain.81.t
	desc = mtg_britain.81.d
	picture = GFX_report_event_generic_sign_treaty3

	is_triggered_only = yes
	
	# Ok
	option = {
		name = mtg_britain.81.a
		create_wargoal = {
			type = puppet_wargoal_focus
			target = FROM
		}
	}
}


